\doxysection{event\+\_\+manager.\+hpp}
\hypertarget{event__manager_8hpp_source}{}\label{event__manager_8hpp_source}\index{CommandGL/include/event\_manager.hpp@{CommandGL/include/event\_manager.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ CGL\_EVENT\_MANAGER\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ CGL\_EVENT\_MANAGER\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}console.hpp"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }cgl}
\DoxyCodeLine{00010\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcgl_1_1EventManager}{EventManager}}}
\DoxyCodeLine{00021\ \ \ \ \ \{}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00023\ \ \ \ \ }
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcgl_1_1EventManager_a642a9d40e88246ebf2d63b4444083e90}{EventManager}}(\mbox{\hyperlink{classcgl_1_1Console}{Console}}\&\ console)\ :\ m\_console(console)\ \{\}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcgl_1_1EventManager_acb0a9ed88000209a6bb9628f7ff0ec56}{isKeyPressed}}(KeyCode\ key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::array<bool,\ static\_cast<size\_t>(KeyCode::Count)>\ \&\mbox{\hyperlink{classcgl_1_1EventManager_a5fce46c255cf5006aa555de2ca5b604e}{getKeyStates}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ std::optional<Event>\ \mbox{\hyperlink{classcgl_1_1EventManager_abf419ef0be0ea964e0e793e194c7b250}{pollEvent}}();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Callbacks>}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcgl_1_1EventManager_adff2d917c7c742130925ed681524ec64}{handleEvents}}(Callbacks\&\&...\ callbacks);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ updateEvents();}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<Event>\ \&peekEvents()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcgl_1_1Console}{Console}}\ \&m\_console;}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ std::vector<Event>\ m\_events;}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcgl_1_1Framework}{Framework}};}
\DoxyCodeLine{00110\ \ \ \ \ \};\ \ \ \ }
\DoxyCodeLine{00111\ \ \ \ \ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Callbacks>}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcgl_1_1EventManager_adff2d917c7c742130925ed681524ec64}{EventManager::handleEvents}}(Callbacks\&\&...\ callbacks)\ \{}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ updateEvents();}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ std::vector<bool>\ handledEvents(m\_events.size(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ processCallback\ =\ [\textcolor{keyword}{this},\ \&handledEvents](\textcolor{keyword}{auto}\&\&\ callback)\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ m\_events.size();\ ++i)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \textcolor{keyword}{event}\ =\ m\_events[i];}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_invocable\_v<\textcolor{keyword}{decltype}(callback),\ \mbox{\hyperlink{structcgl_1_1KeyPressEvent}{KeyPressEvent}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcgl_1_1Event}{Event}}\&>)\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.isOfType<\mbox{\hyperlink{structcgl_1_1KeyPressEvent}{KeyPressEvent}}>())\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback(\mbox{\hyperlink{structcgl_1_1KeyPressEvent}{KeyPressEvent}}\{\},\ event);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handledEvents[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_invocable\_v<\textcolor{keyword}{decltype}(callback),\ \mbox{\hyperlink{structcgl_1_1KeyReleaseEvent}{KeyReleaseEvent}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcgl_1_1Event}{Event}}\&>)\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.isOfType<\mbox{\hyperlink{structcgl_1_1KeyReleaseEvent}{KeyReleaseEvent}}>())\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback(\mbox{\hyperlink{structcgl_1_1KeyReleaseEvent}{KeyReleaseEvent}}\{\},\ event);}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handledEvents[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_invocable\_v<\textcolor{keyword}{decltype}(callback),\ \mbox{\hyperlink{structcgl_1_1MouseMoveEvent}{MouseMoveEvent}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcgl_1_1Event}{Event}}\&>)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.isOfType<\mbox{\hyperlink{structcgl_1_1MouseMoveEvent}{MouseMoveEvent}}>())\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback(\mbox{\hyperlink{structcgl_1_1MouseMoveEvent}{MouseMoveEvent}}\{\},\ event);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handledEvents[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_invocable\_v<\textcolor{keyword}{decltype}(callback),\ \mbox{\hyperlink{structcgl_1_1MouseScrollEvent}{MouseScrollEvent}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcgl_1_1Event}{Event}}\&>)\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.isOfType<\mbox{\hyperlink{structcgl_1_1MouseScrollEvent}{MouseScrollEvent}}>())\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback(\mbox{\hyperlink{structcgl_1_1MouseScrollEvent}{MouseScrollEvent}}\{\},\ event);}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handledEvents[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_invocable\_v<\textcolor{keyword}{decltype}(callback),\ \mbox{\hyperlink{structcgl_1_1ConsoleEvent}{ConsoleEvent}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcgl_1_1Event}{Event}}\&>)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.isOfType<\mbox{\hyperlink{structcgl_1_1ConsoleEvent}{ConsoleEvent}}>())\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback(\mbox{\hyperlink{structcgl_1_1ConsoleEvent}{ConsoleEvent}}\{\},\ event);}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handledEvents[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_invocable\_v<\textcolor{keyword}{decltype}(callback),\ \mbox{\hyperlink{structcgl_1_1InvalidEvent}{InvalidEvent}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classcgl_1_1Event}{Event}}\&>)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.isOfType<\mbox{\hyperlink{structcgl_1_1InvalidEvent}{InvalidEvent}}>())\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback(\mbox{\hyperlink{structcgl_1_1InvalidEvent}{InvalidEvent}}\{\},\ event);}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handledEvents[i]\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ (processCallback(callbacks),\ ...);}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(handledEvents.size())\ -\/\ 1;\ i\ >=\ 0;\ -\/-\/i)\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (handledEvents[i])\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_events.erase(m\_events.begin()\ +\ i);}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ CGL\_EVENT\_MANAGER\_HPP}}

\end{DoxyCode}
